<!DOCTYPE html>
<html lang="en" >

    <head>
        <meta charset="UTF-8">
        <title>trackTS v1.0</title>
        <link rel="stylesheet" href="dist/bundle.css">
        <link rel="stylesheet" href="style.css">
        <link rel="manifest" href="manifest.json">

        <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
        <link rel="icon" href="favicon.ico">
        <meta name="msapplication-TileColor" content="#00ff95">
        <meta name="theme-color" content="#00ff95">
    </head>

    <body>
        <div id="container">
            <div id="video-container">
                <div id="main-container">
                    <canvas id="main"></canvas>
                </div>
            </div>
            <canvas id="scrubber"></canvas>
            <div id="sidebar-visibility" class="show"></div>
            <div id="sidebar" class="hidden">
                <div id="toolbox" class="sidebar-item">
                    <div class="handle-bar">
                        <div class="handle"></div>
                        <div class="minimize"></div>
                    </div>
                    <div class="option button" title="Create New Track" id="new-track-button"></div>
                    <div class="option button" title="Create Scale" id="scale-button"></div>
                    <div class="option button disabled" title="Fit to Screen" id="screen-fit-button"></div>
                    <div class="option button" title="Undo" id="undo-button"></div>
                    <div class="option button" title="Redo" id="redo-button"></div>
                    <div class="option button play" title="Play Video" id="play-pause-button"></div>
                    <div class="option button" title="Edit Project" id="edit-project-button"></div>
                    <div class="option button disabled" title="Export Data" id="export-button"></div>
                    <div class="option button" title="Save" id="save-button"></div>
                    <div class="option button" title="New Project" id="new-project"></div>
                    <div class="option button disabled" title="Logout of Drive" id="logout-button"></div>
                    <div class="option button help-button" title="Help" id="help-button"></div>
                    <div class="option" title="No Changes to Backup" id="backup-status"></div>
                </div>
                <div id="tracks" class="sidebar-item hidden">
                    <div class="handle-bar">
                        <div class="handle"></div>
                        <div class="minimize"></div>
                    </div>
                    <div id="track-list" class="sidebar-list">
                        <ul></ul>
                    </div>
                </div>
                <div id="graphs" class="sidebar-item hidden">
                    <div class="handle-bar">
                        <div class="handle"></div>
                        <div class="minimize"></div>
                    </div>
                    <div id="table"></div>
                </div>
            </div>
            <div id="modal-container" class="active launch">
                <div id="launch" class="modal active">
					<img src="info/logo.png" alt="trackTS Logo" id="modal-logo">

                    <!-- PRIMARY: Webcam Recording -->
                    <div class="launch-primary">
                        <button id="webcam-record-button" class="primary-action">
                            <span class="webcam-icon"></span>
                            Record from Webcam
                        </button>
                    </div>

                    <div class="launch-divider">
                        <span>or load an existing video</span>
                    </div>

                    <!-- SECONDARY: File Loading -->
                    <div id="file-input-container" class="launch-secondary">
                        <div class="area" id="file-drop-area">
                            <div class="area-content">
                                <div class="text">Drag a video or .trackTS file here, or</div>
                                <div class="launch-buttons">
                                    <label for="file-input" class="button">Select Local File</label>
                                    <button id="pick" disabled=true>Select From Drive</button>
                                </div>
                                <a id="info-link" href="info">What is trackTS?</a>
                            </div>
                        </div>
                        <input type="file" id="file-input" accept=".trackTS,.mp4,.m4v,.webm">
                    </div>
                </div>

                <!-- Webcam Recording Modal -->
                <div id="webcam-modal" class="modal">
                    <div class="modal-title">Record from Webcam</div>
                    <div class="webcam-camera-select">
                        <label for="camera-select">Camera:</label>
                        <select id="camera-select"></select>
                    </div>
                    <div class="webcam-preview-container">
                        <video id="webcam-preview" autoplay muted playsinline></video>
                        <div class="webcam-recording-indicator hidden">
                            <span class="recording-dot"></span>
                            <span class="recording-time">00:00</span>
                        </div>
                        <div class="webcam-status"></div>
                    </div>
                    <div class="form-buttons">
                        <button id="webcam-cancel">Cancel</button>
                        <button id="webcam-action" class="webcam-action-btn">Start Recording</button>
                    </div>
                </div>

                <!-- Webcam Review Modal -->
                <div id="webcam-review-modal" class="modal">
                    <div class="modal-title">Review Recording</div>
                    <div class="webcam-preview-container">
                        <video id="webcam-review-video" controls playsinline></video>
                    </div>
                    <div class="form-buttons">
                        <button id="webcam-rerecord">Re-record</button>
                        <button id="webcam-use-video" class="webcam-action-btn">Use Video</button>
                    </div>
                </div>
            </div>
        </div>
        <button id="help-fab" class="help-button"></button>
        <a id="github-fab" href="https://github.com/veillette/trackTS" target="_blank"></a>
        <video id="video" autoplay muted></video>
        <video id="video-clone" autoplay muted></video>

        <div id="fullscreen-loader"></div>

		<!-- Global site tag (gtag.js) - Google Analytics -->
        <script type="text/javascript" src='src/createjs.min.js'></script>
        <!-- Google APIs: gapi (client + picker) and Identity Services (OAuth) -->
        <script src="https://apis.google.com/js/api.js"></script>
        <script src="https://accounts.google.com/gsi/client"></script>

        <!-- Application bundle (compiled from TypeScript) -->
        <script type="text/javascript" src="dist/bundle.iife.js"></script>
    </body>
</html>
